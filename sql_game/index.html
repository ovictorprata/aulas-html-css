<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>O Mistério no Mundo do Cinema</title>
    <!-- Link para o Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #1a1a1a; /* Fundo preto */
        color: white;
        font-family: "Arial", sans-serif;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        height: 100%;
        margin: 0;
        flex-direction: column;
        text-align: center;
        overflow-x: hidden; /* Evita o transbordo horizontal */
        padding-top: 20px; /* Ajusta o padding superior */
      }
      .container {
        max-width: 900px;
        width: 100%;
        margin: 0 auto;
      }
      .img-cofre {
        width: 100%;
        max-width: 300px;
        margin-bottom: 20px;
        border-radius: 20px;
      }
      .input-code {
        width: 40px;
        height: 40px;
        text-align: center;
        font-size: 24px;
        margin: 5px;
        border: 2px solid #ccc;
        border-radius: 5px;
        background-color: #333;
        color: white;
      }
      .input-code:focus {
        border-color: #e60000;
        background-color: #444;
      }
      .btn {
        margin-top: 20px;
      }
      .story-intro {
        background: linear-gradient(
          45deg,
          rgba(255, 0, 0, 0.8),
          rgba(0, 0, 0, 0.8)
        );
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 30px;
        font-size: 18px;
        font-weight: bold;
      }
      .danger-message,
      .success-message {
        font-size: 22px;
        font-weight: bold;
      }
      .danger-message {
        color: #ff3333;
      }
      .success-message {
        color: #33cc33;
      }
      .scene-images {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
        margin-top: 20px;
      }
      .scene-images img {
        width: 150px;
        margin: 10px;
        border-radius: 10px;
      }
      .cards-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
        margin-top: 40px;
        gap: 20px;
      }
      .card {
        width: 200px;
        margin: 10px;
        background-color: #333;
        color: white;
        border: 1px solid #f00;
        border-radius: 10px;
        transition: transform 0.3s;
      }
      .card img {
        border-radius: 10px 10px 0 0;
        width: 100%;
      }
      .card-body {
        padding: 10px;
        text-align: center;
      }
      .card:hover {
        transform: scale(1.05); /* Efeito de hover para os cards */
      }
      .modal-body {
        font-size: 18px;
      }
      @media (max-width: 767px) {
        .container {
          padding-left: 10px;
          padding-right: 10px;
        }
        .scene-images img,
        .card {
          width: 100%;
          max-width: 200px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Introdução ao Caso -->
      <div class="story-intro">
        <p>
          Na cidade de <strong>Cinepolis</strong>, um crime misterioso abalou o
          universo do cinema! Durante a grande Premiere do novo filme de
          super-heróis, o precioso <strong>Cineglobo</strong>, uma relíquia de
          ouro, foi roubado. As câmeras de segurança falharam, mas você, um
          detetive investigativo, tem a chance de resolver esse caso.
        </p>
        <p>
          <strong
            >Os suspeitos são famosos personagens de filmes que estavam
            presentes no evento. As pistas estão por toda parte, mas uma coisa é
            certa: apenas um verdadeiro investigador poderá decifrar o
            mistério!</strong
          >
        </p>
      </div>

      <!-- Cena do Crime -->
      <div class="scene-images">
        <img src="cenario1.png" alt="Cofre Roubado" class="img-thumbnail" />
        <img
          src="cenario2.png"
          alt="Premiere de Cinema"
          class="img-thumbnail"
        />
        <img
          src="cenario3.png"
          alt="Suspeito Misterioso"
          class="img-thumbnail"
        />
      </div>

      <!-- Cards dos Personagens -->
      <div class="cards-container">
        <div class="card">
          <img src="personagem1.jpg" alt="Personagem 1" />
          <div class="card-body">
            <h5 class="card-title">Personagem 1</h5>
            <p class="card-text">
              Suspeito principal, com um histórico misterioso.
            </p>
          </div>
        </div>
        <div class="card">
          <img src="personagem2.jpg" alt="Personagem 2" />
          <div class="card-body">
            <h5 class="card-title">Personagem 2</h5>
            <p class="card-text">
              Estava presente no evento e viu algo estranho...
            </p>
          </div>
        </div>
        <div class="card">
          <img src="personagem3.jpg" alt="Personagem 3" />
          <div class="card-body">
            <h5 class="card-title">Personagem 3</h5>
            <p class="card-text">
              Alibi forte, mas ninguém sabe ao certo o que aconteceu.
            </p>
          </div>
        </div>
      </div>

      <!-- Agora vamos ao Cofre -->
      <div class="mystery-message">
        <p>
          Porém, todas as pistas que você coletou levam a um único lugar: o
          Cofre!
        </p>
      </div>

      <!-- Imagem do Cofre -->
      <img
        id="cofre"
        class="img-cofre"
        src="./fechado.jpg"
        alt="Cofre Fechado"
      />

      <!-- Campo para inserir a senha -->
      <div id="senha-container">
        <input
          id="digito1"
          class="input-code"
          maxlength="1"
          type="text"
          oninput="moveFocus(this, 'digito2')"
        />
        <input
          id="digito2"
          class="input-code"
          maxlength="1"
          type="text"
          oninput="moveFocus(this, 'digito3')"
        />
        <input
          id="digito3"
          class="input-code"
          maxlength="1"
          type="text"
          oninput="moveFocus(this, 'digito4')"
        />
        <input
          id="digito4"
          class="input-code"
          maxlength="1"
          type="text"
          oninput="moveFocus(this, 'digito5')"
        />
        <input
          id="digito5"
          class="input-code"
          maxlength="1"
          type="text"
          oninput="moveFocus(this, 'digito6')"
        />
        <input
          id="digito6"
          class="input-code"
          maxlength="1"
          type="text"
          oninput="moveFocus(this, 'digito7')"
        />
        <input
          id="digito7"
          class="input-code"
          maxlength="1"
          type="text"
          oninput="moveFocus(this, 'digito8')"
        />
        <input
          id="digito8"
          class="input-code"
          maxlength="1"
          type="text"
          oninput="moveFocus(this, 'submit')"
        />
      </div>

      <!-- Botão para verificar a senha -->
      <button id="verify-btn" class="btn btn-danger" onclick="verificarSenha()">
        Verificar
      </button>

      <!-- Mensagens de sucesso ou erro -->
      <div id="result-message" class="mt-3"></div>
      <div id="reload-btn" class="reload-btn">
        <button class="btn btn-dark" onclick="reloadPage()">Recarregar</button>
      </div>

      <!-- Mostrar tentativas -->
      <div id="tentativas">
        <p>
          <strong
            >Tentativas realizadas:
            <span id="contador-tentativas">0</span></strong
          >
        </p>
      </div>
    </div>

    <!-- Modal de Erro -->
    <div
      class="modal"
      id="errorModal"
      tabindex="-1"
      aria-labelledby="errorModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="errorModalLabel">Erro</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body text-dark">
            Você falhou... O criminoso continua à solta! O mistério não foi
            resolvido.
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-dark" data-bs-dismiss="modal">
              Fechar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de Sucesso -->
    <div
      class="modal"
      id="successModal"
      tabindex="-1"
      aria-labelledby="successModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="successModalLabel">
              Mistério Resolvido!
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body text-dark">
            Parabéns, você é um excelente detetive! O Cineglobo foi recuperado
            com sucesso!
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-dark" data-bs-dismiss="modal">
              Fechar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
    <script>
      const senhaCorreta = atob("OEE2RDRGMlk="); // Base64 codificado (senha '8A6D4F2Y')

      // Inicializar contador de tentativas no localStorage
      if (!localStorage.getItem("tentativas")) {
        localStorage.setItem("tentativas", 0);
      }

      // Atualizar contador de tentativas na tela
      function atualizarContador() {
        const tentativas = localStorage.getItem("tentativas");
        document.getElementById("contador-tentativas").textContent = tentativas;
      }

      // Função para mover o foco entre os campos
      function moveFocus(current, nextId) {
        if (current.value.length == current.maxLength) {
          const nextInput = document.getElementById(nextId);
          if (nextInput) {
            nextInput.focus();
          }
        }
      }

      // Função para verificar a senha
      function verificarSenha() {
        const digitos = [
          document.getElementById("digito1").value,
          document.getElementById("digito2").value,
          document.getElementById("digito3").value,
          document.getElementById("digito4").value,
          document.getElementById("digito5").value,
          document.getElementById("digito6").value,
          document.getElementById("digito7").value,
          document.getElementById("digito8").value,
        ].join("");

        // Incrementar tentativa
        let tentativas = parseInt(localStorage.getItem("tentativas"));
        tentativas++;
        localStorage.setItem("tentativas", tentativas);

        if (digitos === senhaCorreta) {
          document.getElementById("cofre").src = "./cofre-aberto.png"; // Imagem do cofre aberto
          const successModal = new bootstrap.Modal(
            document.getElementById("successModal")
          );
          successModal.show();
          atualizarContador();
          document.getElementById(
            "tentativas"
          ).innerHTML += `<p><strong>Total de tentativas: ${tentativas}</strong></p>`;
        } else {
          const errorModal = new bootstrap.Modal(
            document.getElementById("errorModal")
          );
          errorModal.show();
          atualizarContador();
        }
      }

      // Função para recarregar a página
      function reloadPage() {
        localStorage.setItem("tentativas", 0); // Resetar contador de tentativas
        window.location.reload();
      }

      // Inicializar o contador de tentativas ao carregar a página
      atualizarContador();
    </script>
  </body>
</html>
